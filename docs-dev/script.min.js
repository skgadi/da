function syntaxHighlight(e){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"})}const{createApp:createApp}=Vue,fullList={serial:{name:"Serial",description:"Serial port communication",commands:{list:{name:"List",description:"List all available serial ports",parameters:[]},open:{name:"Open",description:"Open a serial port",parameters:[{name:"Port",description:"The name of the port to open",type:"text"},{name:"Baudrate",description:"The baudrate to use",type:"number"}]},close:{name:"Close",description:"Close a serial port",parameters:[{name:"Port",description:"The name of the port to close",type:"text"}]},read:{name:"Read",description:"Read data from a serial port",parameters:[{name:"Port",description:"The name of the port to open",type:"text"}]},write:{name:"Write",description:"Write data to a serial port",parameters:[{name:"Port",description:"The name of the port to open",type:"text"},{name:"Data",description:"The data to write",type:"text"}]}}},visa:{name:"VISA",description:"VISA (Virtual Instrument Software Architecture) communication",commands:{list:{name:"List",description:"List all available visa ports",parameters:[]},open:{name:"Open",description:"Open a visa port",parameters:[{name:"Resource",description:"The name of the port to open",type:"text"}]},close:{name:"Close",description:"Close a visa port",parameters:[{name:"Resource",description:"The name of the port to close",type:"text"}]},read:{name:"Read",description:"Read data from a visa port",parameters:[{name:"Resource",description:"The name of the port to open",type:"text"}]},write:{name:"Write",description:"Write data to a visa port",parameters:[{name:"Resource",description:"The name of the port to open",type:"text"},{name:"Data",description:"The data to write",type:"text"}]},query:{name:"Query",description:"Query a visa port",parameters:[{name:"Resource",description:"The name of the port to open",type:"text"},{name:"Data",description:"The data to write",type:"text"}]}}}};let vueApp=createApp({data:()=>({view:0,protocol:"serial",command:"list",parameters:[],fullList:fullList,websocket:null,recCode:"",enableSend:!1}),computed:{codetoSend(){let e={type:this.protocol,command:this.command};return"serial"===this.protocol?(this.fullList[this.protocol].commands[this.command].parameters.length>0&&(e.port=this.parameters[0]),this.fullList[this.protocol].commands[this.command].parameters.length>1&&("open"==this.command?e.baud=this.parameters[1]:"write"==this.command&&(e.data=this.parameters[1]))):"visa"===this.protocol&&(this.fullList[this.protocol].commands[this.command].parameters.length>0&&(e.resource=this.parameters[0]),this.fullList[this.protocol].commands[this.command].parameters.length>1&&(e.data=this.parameters[1])),e},prettySendCode(){return syntaxHighlight(JSON.stringify(this.codetoSend,null,2))}},methods:{connectIfNeeded(){this.enableSend||this.connectSocket()},connectSocket(){this.websocket=new WebSocket("ws://localhost:8765"),this.websocket.onopen=(()=>{this.enableSend=!0}),this.websocket.onmessage=(e=>{this.onReceiveCode(e.data)}),this.websocket.onclose=(()=>{this.enableSend=!1})},onReceiveCode(e){try{let t=JSON.parse(e);this.recCode=syntaxHighlight(JSON.stringify(t,null,2))}catch(e){this.recCode="Error in received code: "+e}},sendCode(){this.enableSend&&(console.log(JSON.stringify(this.codetoSend)),this.websocket.send(JSON.stringify(this.codetoSend)),this.recCode="Fecthing response...")}}}).mount("#app");setInterval(function(){vueApp.connectIfNeeded()},1e3);